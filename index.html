<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Night Delivery MaÅ‚dyty</title>

<style>
body{background:#0e1325;color:#ffd84d;font-family:sans-serif}
button{background:#ffd84d;border:0;padding:10px 16px;margin:4px;cursor:pointer}
.star{font-size:28px;cursor:pointer;color:#555}
.star.active{color:gold}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8)}
.modal>div{background:#111;padding:20px;max-width:700px;margin:40px auto}
</style>
</head>

<body>

<h1>Night Delivery MaÅ‚dyty</h1>
ğŸ“ <a href="tel:512956568">512 956 568</a><br>

<button onclick="openReg()">ğŸ“œ Regulamin</button>

<div id="avgRating"></div>

<div>
<button onclick="setLang('pl')">PL</button>
<button onclick="setLang('en')">EN</button>
<button onclick="setLang('ua')">UA</button>
</div>

<hr>

<button onclick="calcKm()">ğŸ“ Oblicz km z GPS</button>
<div id="kmInfo"></div>

<label>Napiwek:
<select id="tip">
<option value="0">0 zÅ‚</option>
<option value="5">5 zÅ‚</option>
<option value="10">10 zÅ‚</option>
</select>
</label>

<button onclick="calcPrice()">ğŸ’° Oblicz cenÄ™</button>
<div id="price"></div>

<button onclick="order()">ğŸ“ ZamÃ³w</button>

<hr>

<h2>ğŸ“ Opinie</h2>
<input id="opinionName" placeholder="Twoje imiÄ™"><br>
<div id="stars"></div>
<textarea id="opinionText" placeholder="Twoja opinia"></textarea><br>
<button onclick="saveOpinion()">Dodaj opiniÄ™</button>

<div id="opinions"></div>

<!-- REGULAMIN -->
<div class="modal" id="reg">
<div>
<button onclick="closeReg()">Zamknij</button>
<h2>REGULAMIN</h2>
<p>
- Nie kupujemy alkoholu oraz wyrobÃ³w nikotynowych osobom poniÅ¼ej 18 roku Å¼ycia...<br>
- JeÅ¼eli zamÃ³wienie jest wiÄ™ksze niÅ¼ 30zÅ‚ potrzebna jest przedpÅ‚ata Blik<br>
- Kierowca ma prawo odmÃ³wiÄ‡ dostarczenia zamÃ³wienia<br>
- PowyÅ¼ej 50km nie kursujemy<br>
- Cena za usÅ‚ugÄ™ nie podlega dyskusji<br>
</p>
</div>
</div>

<!-- FIREBASE + OPINIE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
getFirestore,collection,addDoc,getDocs,query,orderBy
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyDaWK9pZt5Ak97-ib12LymEu5bGVLpbPn0",
authDomain: "night-delivery-18960.firebaseapp.com",
projectId: "night-delivery-18960",
storageBucket: "night-delivery-18960.firebasestorage.app",
messagingSenderId: "425404689430",
appId: "1:425404689430:web:efce19048bee3232a11937"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* GWIAZDKI */
let selectedStars=0;
const stars=document.getElementById("stars");
for(let i=1;i<=5;i++){
let s=document.createElement("span");
s.innerText="â˜…"; s.className="star";
s.onclick=()=>{selectedStars=i;upd()};
stars.appendChild(s);
}
function upd(){[...stars.children].forEach((s,i)=>s.classList.toggle("active",i<selectedStars));}

/* OPINIE */
window.saveOpinion=async()=>{
if(!opinionName.value||!selectedStars) return alert("UzupeÅ‚nij opiniÄ™");
await addDoc(collection(db,"opinions"),{
name:opinionName.value,
stars:selectedStars,
text:opinionText.value,
time:Date.now()
});
opinionName.value="";opinionText.value="";selectedStars=0;upd();
loadOpinions();
};

async function loadOpinions(){
const q=query(collection(db,"opinions"),orderBy("time","desc"));
const snap=await getDocs(q);
let sum=0,c=0;opinions.innerHTML="";
snap.forEach(d=>{
let o=d.data();sum+=o.stars;c++;
opinions.innerHTML+=`<div><b>${o.name}</b> â­${o.stars}/5<br>${o.text}</div>`;
});
avgRating.innerText=`â­ ${(c?sum/c:0).toFixed(1)} / 5 (${c})`;
}
loadOpinions();
</script>

<script>
/* LOGIKA APLIKACJI */
let km=0;
function calcKm(){
navigator.geolocation.getCurrentPosition(p=>{
km=Math.random()*60;
kmInfo.innerText="Dystans: "+km.toFixed(1)+" km";
});
}
function calcPrice(){
if(km>50) return alert("PowyÅ¼ej 50km nie kursujemy");
let price=15+km*2+Number(tip.value);
document.getElementById("price").innerText="Cena: "+price+" zÅ‚";
}
function order(){location.href="tel:512956568";}
function openReg(){reg.style.display="block";}
function closeReg(){reg.style.display="none";}
function setLang(l){alert("Zmiana jÄ™zyka: "+l);}
</script>

</body>
</html>










<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Night Delivery Ma≈Çdyty</title>
<meta name="theme-color" content="#000000" />
<link rel="manifest" href="manifest.json">

<style>
body {
margin:0;
font-family: Arial, sans-serif;
background:#000;
color:#fff;
}

header {
background:#111;
padding:20px;
text-align:center;
}

h1 {
color:#f5c400;
margin:0;
}

section {
padding:20px;
}

label {
display:block;
margin-top:15px;
font-size:14px;
}

input, select, textarea, button {
width:100%;
padding:12px;
margin-top:5px;
border-radius:8px;
border:none;
font-size:16px;
}

textarea { resize: vertical; }

button {
background:#f5c400;
font-weight:bold;
margin-top:20px;
transition: transform .15s ease, opacity .15s ease;
}

button:hover {
transform: scale(1.02);
opacity: 0.95;
}

button.secondary {
background:#222;
color:#f5c400;
border:1px solid #f5c400;
}

.price {
font-size:26px;
margin-top:20px;
color:#f5c400;
text-align:center;
}

footer {
text-align:center;
padding:15px;
background:#111;
}

a {
color:#f5c400;
text-decoration:none;
font-size:18px;
}

.info {
text-align:center;
font-size:13px;
opacity:0.8;
margin-top:10px;
}

.card {
background:#111;
border-radius:18px;
padding:20px;
max-width:480px;
margin:20px auto;
box-shadow:0 15px 40px rgba(0,0,0,.7);
}

.summary {
background:#000;
border:1px solid #222;
border-radius:12px;
padding:15px;
margin-top:15px;
font-size:14px;
}

.error {
color:#ff5555;
font-size:13px;
margin-top:8px;
}
</style>
</head>

<body>

<header>
<img src="logo.png" alt="Night Delivery Ma≈Çdyty"
style="max-width:180px; width:100%; height:auto; margin-bottom:10px;">

<div class="lang-switch">
<button onclick="setLang('pl')">PL</button>
<button onclick="setLang('en')">EN</button>
<button onclick="setLang('ua')">UA</button>
</div>

<h1>Night Delivery Ma≈Çdyty</h1>
<p>Dostawa & przew√≥z 24/7</p>
<a href="tel:+48512956568">üìû +48 512 956 568</a>
</header>

<section class="card">

<label>Rodzaj us≈Çugi</label>
<select id="type">
<option value="delivery">Dostawa (jedzenie / zakupy)</option>
<option value="ride">Przew√≥z osoby</option>
</select>

<label>Dystans (km)</label>
<input type="number" id="km" placeholder="np. 12" />
<button type="button" class="secondary" onclick="getGPS()">üìç Oblicz km z GPS</button>
<div class="info">GPS liczy orientacyjny dystans od centrum Ma≈Çdyt</div>

<label>Adres / opis zam√≥wienia</label>
<textarea id="note" placeholder="Np. adres odbioru, co kupiƒá, itp."></textarea>

<button onclick="calculate()">Oblicz cenƒô</button>
<button onclick="sendOrder()">üì© Zam√≥w (SMS / WhatsApp)</button>

<div class="price" id="result"></div>
<div class="error" id="error"></div>
<div class="info" id="timeInfo"></div>
<div class="summary" id="summary"></div>

</section>

<footer>
<a href="tel:512956789">üìû Zadzwo≈Ñ: 512 956 789</a>
<div class="info">Godziny nocne 22:00‚Äì6:00 (dro≈ºsze stawki)</div>
</footer>

<script>
const MALDYTY = { lat: 53.9586, lon: 19.7406 };

function getGPS() {
if (!navigator.geolocation) {
alert('GPS niedostƒôpny');
return;
}

navigator.geolocation.getCurrentPosition(pos => {
const lat = pos.coords.latitude;
const lon = pos.coords.longitude;
const km = distanceKm(MALDYTY.lat, MALDYTY.lon, lat, lon);
document.getElementById('km').value = km.toFixed(1);
}, () => alert('Nie uda≈Ço siƒô pobraƒá lokalizacji'));
}

function distanceKm(lat1, lon1, lat2, lon2) {
const R = 6371;
const dLat = (lat2 - lat1) * Math.PI / 180;
const dLon = (lon2 - lon1) * Math.PI / 180;
const a =
Math.sin(dLat/2)**2 +
Math.cos(lat1*Math.PI/180) *
Math.cos(lat2*Math.PI/180) *
Math.sin(dLon/2)**2;

return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

function calculate() {
const km = Number(document.getElementById('km').value);
const type = document.getElementById('type').value;
const hour = new Date().getHours();
const night = (hour >= 22 || hour < 6);

if (!km || km <= 0) {
document.getElementById('error').innerText = 'Podaj poprawny dystans';
return;
} else {
document.getElementById('error').innerText = '';
}

if (km > 50) {
document.getElementById('result').innerText = 'Maksymalny dystans to 50 km';
return;
}

let price = 0;

if (type === 'delivery') {
price = night ? 19 + km * 1.6 : 15 + km * 1.4;
} else {
price = night ? 8 + km * 2.8 : 6 + km * 2.5;
}

document.getElementById('result').innerText =
'Cena: ' + price.toFixed(2) + ' z≈Ç';

document.getElementById('timeInfo').innerText =
night ? 'Taryfa nocna üåô' : 'Taryfa dzienna ‚òÄÔ∏è';

document.getElementById('summary').innerHTML = `
<b>Us≈Çuga:</b> ${type === 'delivery' ? 'Dostawa' : 'Przew√≥z'}<br>
<b>Dystans:</b> ${km} km<br>
<b>Stawka:</b> ${night ? 'Nocna' : 'Dzienna'}
`;
}

function sendOrder() {
const km = document.getElementById('km').value;
const type = document.getElementById('type').value;
const note = document.getElementById('note').value;
const price = document.getElementById('result').innerText;

if (!km) {
alert('Najpierw oblicz cenƒô');
return;
}

const text =
`Night Delivery Ma≈Çdyty%0A` +
`Us≈Çuga: ${type === 'delivery' ? 'Dostawa' : 'Przew√≥z'}%0A` +
`Dystans: ${km} km%0A` +
`${price}%0A` +
`Uwagi: ${note}`;

const phone = '512956789';

if (/Android|iPhone/i.test(navigator.userAgent)) {
window.open(`https://wa.me/48${phone}?text=${text}`, '_blank');
} else {
window.location.href = `sms:${phone}?body=${text}`;
}
}

const translations = {
pl: { title: "Night Delivery Ma≈Çdyty", subtitle: "Dostawa & przew√≥z 24/7" },
en: { title: "Night Delivery Ma≈Çdyty", subtitle: "Delivery & transport 24/7" },
ua: { title: "Night Delivery Ma≈Çdyty", subtitle: "–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–∞ –ø–µ—Ä–µ–≤–µ–∑–µ–Ω–Ω—è 24/7" }
};

function setLang(lang) {
document.querySelector("h1").innerText = translations[lang].title;
document.querySelector("header p").innerText = translations[lang].subtitle;
}

setLang('pl');
</script>

</body>
</html>
